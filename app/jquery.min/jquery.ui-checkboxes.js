(function(c,d){c[d]=function(a,b){this.$elem=c(a);var e=this;c.each(b,function(f,g){e[f]=g});this.wrapCheckboxWithDivs();this.attachEvents();this.disableTextSelection();this.resizeHandle&&this.optionallyResize("handle");this.resizeContainer&&this.optionallyResize("container");this.initialPosition()};c.extend(c[d].prototype,{wrapCheckboxWithDivs:function(){this.$elem.wrap('<div class="'+this.containerClass+'" />');this.container=this.$elem.parent();this.offLabel=c('<label class="'+this.labelOffClass+
'"><span>'+this.uncheckedLabel+"</span></label>").appendTo(this.container);this.offSpan=this.offLabel.children("span");this.onLabel=c('<label class="'+this.labelOnClass+'"><span>'+this.checkedLabel+"</span></label>").appendTo(this.container);this.onSpan=this.onLabel.children("span");this.handle=c('<div class="'+this.handleClass+'"><div class="'+this.handleRightClass+'"><div class="'+this.handleCenterClass+'" /></div></div>').appendTo(this.container)},disableTextSelection:function(){c.browser.msie&&
c.each([this.handle,this.offLabel,this.onLabel,this.container],function(){c(this).attr("unselectable","on")})},optionallyResize:function(a){var b=this.onLabel.width(),e=this.offLabel.width();if(a=="container"){b=b>e?b:e;b+=this.handle.width()+15}else b=b<e?b:e;this[a].css({width:b})},attachEvents:function(){var a=this;this.container.bind("mousedown touchstart",function(b){b.preventDefault();if(!a.$elem.is(":disabled")){b=b.pageX||b.originalEvent.changedTouches[0].pageX;c[d].currentlyClicking=a.handle;
c[d].dragStartPosition=b;c[d].handleLeftOffset=parseInt(a.handle.css("left"),10)||0;c[d].dragStartedOn=a.$elem}}).bind("iPhoneDrag",function(b,e){b.preventDefault();if(!a.$elem.is(":disabled"))if(a.$elem==c[d].dragStartedOn){b=(e+c[d].handleLeftOffset-c[d].dragStartPosition)/a.rightSide;if(b<0)b=0;if(b>1)b=1;a.handle.css({left:b*a.rightSide});a.onLabel.css({width:b*a.rightSide+4});a.offSpan.css({marginRight:-b*a.rightSide});a.onSpan.css({marginLeft:-(1-b)*a.rightSide})}}).bind("iPhoneDragEnd",function(b,
e){if(!a.$elem.is(":disabled")){if(c[d].dragging){b=(e-c[d].dragStartPosition)/a.rightSide;b=b<0?Math.abs(b)<0.5:b>=0.5}else b=!a.$elem.attr("checked");a.$elem.attr("checked",b);c[d].currentlyClicking=null;c[d].dragging=null;a.$elem.change()}});this.$elem.change(function(){if(a.$elem.is(":disabled")){a.container.addClass(a.disabledClass);return false}else a.container.removeClass(a.disabledClass);var b=a.$elem.attr("checked")?a.rightSide:0;a.handle.animate({left:b},a.duration);a.onLabel.animate({width:b+
4},a.duration);a.offSpan.animate({marginRight:-b},a.duration);a.onSpan.animate({marginLeft:b-a.rightSide},a.duration)})},initialPosition:function(){this.offLabel.css({width:this.container.width()-5});var a=c.browser.msie&&c.browser.version<7?3:6;this.rightSide=this.container.width()-this.handle.width()-a;if(this.$elem.is(":checked")){this.handle.css({left:this.rightSide});this.onLabel.css({width:this.rightSide+4});this.offSpan.css({marginRight:-this.rightSide})}else{this.onLabel.css({width:0});this.onSpan.css({marginLeft:-this.rightSide})}this.$elem.is(":disabled")&&
this.container.addClass(this.disabledClass)}});c.fn[d]=function(a){var b=this.filter(":checkbox");if(!b.length)return this;var e=c.extend({},c[d].defaults,a);b.each(function(){c(this).data(d,new c[d](this,e))});if(!c[d].initComplete){c(document).bind("mousemove touchmove",function(f){if(c[d].currentlyClicking){f.preventDefault();var g=f.pageX||f.originalEvent.changedTouches[0].pageX;if(!c[d].dragging&&Math.abs(c[d].dragStartPosition-g)>e.dragThreshold)c[d].dragging=true;c(f.target).trigger("iPhoneDrag",
[g])}}).bind("mouseup touchend",function(f){if(c[d].currentlyClicking){f.preventDefault();f=f.pageX||f.originalEvent.changedTouches[0].pageX;c(c[d].currentlyClicking).trigger("iPhoneDragEnd",[f])}});c[d].initComplete=true}return this};c[d].defaults={duration:200,checkedLabel:"ON",uncheckedLabel:"OFF",resizeHandle:true,resizeContainer:true,disabledClass:"iPhoneCheckDisabled",containerClass:"iPhoneCheckContainer",labelOnClass:"iPhoneCheckLabelOn",labelOffClass:"iPhoneCheckLabelOff",handleClass:"iPhoneCheckHandle",
handleCenterClass:"iPhoneCheckHandleCenter",handleRightClass:"iPhoneCheckHandleRight",dragThreshold:5}})(jQuery,"iphoneStyle");
