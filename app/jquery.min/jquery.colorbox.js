(function(c,J,oa){function f(b,d,g){g=J.createElement("div");if(b)g.id=l+b;g.style.cssText=d||"";return c(g)}function o(b,d){return Math.round((/%/.test(b)?(d==="x"?q.width():q.height())/100:1)*parseInt(b,10))}function X(b){return a.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(b)}function ia(b){a=c.extend({},c.data(r,u));for(b in a)if(c.isFunction(a[b])&&b.substring(0,2)!=="on")a[b]=a[b].call(r);a.rel=a.rel||r.rel||"nofollow";a.href=a.href||c(r).attr("href");a.title=a.title||
r.title;if(typeof a.href==="string")a.href=c.trim(a.href)}function C(b,d){d&&d.call(r);c.event.trigger(b)}function pa(){var b,d=l+"Slideshow_",g="click."+l,m,n;if(a.slideshow&&h[1]){m=function(){K.text(a.slideshowStop).unbind(g).bind(Y,function(){if(i<h.length-1||a.loop)b=setTimeout(e.next,a.slideshowSpeed)}).bind(Z,function(){clearTimeout(b)}).one(g+" "+R,n);k.removeClass(d+"off").addClass(d+"on");b=setTimeout(e.next,a.slideshowSpeed)};n=function(){clearTimeout(b);K.text(a.slideshowStart).unbind([Y,
Z,R,g].join(" ")).one(g,m);k.removeClass(d+"on").addClass(d+"off")};a.slideshowAuto?m():n()}else k.removeClass(d+"off "+d+"on")}function ja(b){if(!S){r=b;ia();h=c(r);i=0;if(a.rel!=="nofollow"){h=c("."+G).filter(function(){return(c.data(this,u).rel||this.rel)===a.rel});i=h.index(r);if(i===-1){h=h.add(r);i=h.length-1}}if(!v){v=L=true;k.show();if(a.returnFocus)try{r.blur();c(r).one(ka,function(){try{this.focus()}catch(g){}})}catch(d){}z.css({opacity:+a.opacity,cursor:a.overlayClose?"pointer":"auto"}).show();
a.w=o(a.initialWidth,"x");a.h=o(a.initialHeight,"y");e.position();M&&q.bind("resize."+T+" scroll."+T,function(){z.css({width:q.width(),height:q.height(),top:q.scrollTop(),left:q.scrollLeft()})}).trigger("resize."+T);C(la,a.onOpen);$.add(aa).hide();ba.html(a.close).show()}e.load(true)}}var ma={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,
iframe:false,fastIframe:true,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:true,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,returnFocus:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true,top:false,bottom:false,left:false,right:false,
fixed:false,data:false},u="colorbox",l="cbox",G=l+"Element",la=l+"_open",Z=l+"_load",Y=l+"_complete",R=l+"_cleanup",ka=l+"_closed",U=l+"_purge",H=c.browser.msie&&!c.support.opacity,M=H&&c.browser.version<7,T=l+"_IE6",z,k,D,t,ca,da,ea,fa,h,q,p,N,O,aa,ga,K,P,Q,ba,$,a,A,B,w,x,r,i,j,v,L,S,ha,na,e;e=c.fn[u]=c[u]=function(b,d){var g=this;b=b||{};if(!g[0]){if(g.selector)return g;g=c("<a/>");b.open=true}if(d)b.onComplete=d;g.each(function(){c.data(this,u,c.extend({},c.data(this,u)||ma,b));c(this).addClass(G)});
if(c.isFunction(b.open)&&b.open.call(g)||b.open)ja(g[0]);return g};e.init=function(){q=c(oa);k=f().attr({id:u,"class":H?l+(M?"IE6":"IE"):""});z=f("Overlay",M?"position:absolute":"").hide();D=f("Wrapper");t=f("Content").append(p=f("LoadedContent","width:0; height:0; overflow:hidden"),O=f("LoadingOverlay").add(f("LoadingGraphic")),aa=f("Title"),ga=f("Current"),P=f("Next"),Q=f("Previous"),K=f("Slideshow").bind(la,pa),ba=f("Close"));D.append(f().append(f("TopLeft"),ca=f("TopCenter"),f("TopRight")),f(false,
"clear:left").append(da=f("MiddleLeft"),t,ea=f("MiddleRight")),f(false,"clear:left").append(f("BottomLeft"),fa=f("BottomCenter"),f("BottomRight"))).children().children().css({"float":"left"});N=f(false,"position:absolute; width:9999px; visibility:hidden; display:none");c("body").prepend(z,k.append(D,N));t.children().hover(function(){c(this).addClass("hover")},function(){c(this).removeClass("hover")}).addClass("hover");A=ca.height()+fa.height()+t.outerHeight(true)-t.height();B=da.width()+ea.width()+
t.outerWidth(true)-t.width();w=p.outerHeight(true);x=p.outerWidth(true);k.css({"padding-bottom":A,"padding-right":B}).hide();P.click(function(){e.next()});Q.click(function(){e.prev()});ba.click(function(){e.close()});$=P.add(Q).add(ga).add(K);t.children().removeClass("hover");z.click(function(){a.overlayClose&&e.close()});c(J).bind("keydown."+l,function(b){var d=b.keyCode;if(v&&a.escKey&&d===27){b.preventDefault();e.close()}if(v&&a.arrowKey&&h[1])if(d===37){b.preventDefault();Q.click()}else if(d===
39){b.preventDefault();P.click()}})};e.remove=function(){k.add(z).remove();c("."+G).removeData(u).removeClass(G)};e.position=function(b,d){function g(E){ca[0].style.width=fa[0].style.width=t[0].style.width=E.style.width;O[0].style.height=O[1].style.height=t[0].style.height=da[0].style.height=ea[0].style.height=E.style.height}var m=0,n=0;q.unbind("resize."+l);k.hide();if(a.fixed&&!M)k.css({position:"fixed"});else{m=q.scrollTop();n=q.scrollLeft();k.css({position:"absolute"})}n+=a.right!==false?Math.max(q.width()-
a.w-x-B-o(a.right,"x"),0):a.left!==false?o(a.left,"x"):Math.round(Math.max(q.width()-a.w-x-B,0)/2);m+=a.bottom!==false?Math.max(J.documentElement.clientHeight-a.h-w-A-o(a.bottom,"y"),0):a.top!==false?o(a.top,"y"):Math.round(Math.max(J.documentElement.clientHeight-a.h-w-A,0)/2);k.show();b=k.width()===a.w+x&&k.height()===a.h+w?0:b||0;D[0].style.width=D[0].style.height="9999px";k.dequeue().animate({width:a.w+x,height:a.h+w,top:m,left:n},{duration:b,complete:function(){g(this);L=false;D[0].style.width=
a.w+x+B+"px";D[0].style.height=a.h+w+A+"px";d&&d();setTimeout(function(){q.bind("resize."+l,e.position)},1)},step:function(){g(this)}})};e.resize=function(b){if(v){b=b||{};if(b.width)a.w=o(b.width,"x")-x-B;if(b.innerWidth)a.w=o(b.innerWidth,"x");p.css({width:a.w});if(b.height)a.h=o(b.height,"y")-w-A;if(b.innerHeight)a.h=o(b.innerHeight,"y");if(!b.innerHeight&&!b.height){b=p.wrapInner("<div style='overflow:auto'></div>").children();a.h=b.height();b.replaceWith(b.children())}p.css({height:a.h});e.position(a.transition===
"none"?0:a.speed)}};e.prep=function(b){function d(){a.w=a.w||p.width();a.w=a.mw&&a.mw<a.w?a.mw:a.w;return a.w}function g(){a.h=a.h||p.height();a.h=a.mh&&a.mh<a.h?a.mh:a.h;return a.h}if(v){var m,n=a.transition==="none"?0:a.speed;p.remove();p=f("LoadedContent").append(b);p.hide().appendTo(N.show()).css({width:d(),overflow:a.scrolling?"auto":"hidden"}).css({height:g()}).prependTo(t);N.hide();c(j).css({"float":"none"});M&&c("select").not(k.find("select")).filter(function(){return this.style.visibility!==
"hidden"}).css({visibility:"hidden"}).one(R,function(){this.style.visibility="inherit"});m=function(){function E(){H&&k[0].style.removeAttribute("filter")}var I,s,V,F;s=h.length;var y,W;if(v){W=function(){clearTimeout(na);O.hide();C(Y,a.onComplete)};H&&j&&p.fadeIn(100);aa.html(a.title).add(p).show();if(s>1){typeof a.current==="string"&&ga.html(a.current.replace("{current}",i+1).replace("{total}",s)).show();P[a.loop||i<s-1?"show":"hide"]().html(a.next);Q[a.loop||i?"show":"hide"]().html(a.previous);
I=i?h[i-1]:h[s-1];V=i<s-1?h[i+1]:h[0];a.slideshow&&K.show();if(a.preloading){F=c.data(V,u).href||V.href;s=c.data(I,u).href||I.href;F=c.isFunction(F)?F.call(V):F;s=c.isFunction(s)?s.call(I):s;if(X(F))c("<img/>")[0].src=F;if(X(s))c("<img/>")[0].src=s}}else $.hide();if(a.iframe){y=c("<iframe/>").addClass(l+"Iframe")[0];a.fastIframe?W():c(y).one("load",W);y.name=l+ +new Date;y.src=a.href;if(!a.scrolling)y.scrolling="no";if(H){y.frameBorder=0;y.allowTransparency="true"}c(y).appendTo(p).one(U,function(){y.src=
"//about:blank"})}else W();a.transition==="fade"?k.fadeTo(n,1,E):E()}};a.transition==="fade"?k.fadeTo(n,0,function(){e.position(0,m)}):e.position(n,m)}};e.load=function(b){var d,g,m=e.prep;L=true;j=false;r=h[i];b||ia();C(U);C(Z,a.onLoad);a.h=a.height?o(a.height,"y")-w-A:a.innerHeight&&o(a.innerHeight,"y");a.w=a.width?o(a.width,"x")-x-B:a.innerWidth&&o(a.innerWidth,"x");a.mw=a.w;a.mh=a.h;if(a.maxWidth){a.mw=o(a.maxWidth,"x")-x-B;a.mw=a.w&&a.w<a.mw?a.w:a.mw}if(a.maxHeight){a.mh=o(a.maxHeight,"y")-w-
A;a.mh=a.h&&a.h<a.mh?a.h:a.mh}d=a.href;na=setTimeout(function(){O.show()},100);if(a.inline){f().hide().insertBefore(c(d)[0]).one(U,function(){c(this).replaceWith(p.children())});m(c(d))}else if(a.iframe)m(" ");else if(a.html)m(a.html);else if(X(d)){c(j=new Image).addClass(l+"Photo").error(function(){a.title=false;m(f("Error").text("This image could not be loaded"))}).load(function(){var n;j.onload=null;if(a.scalePhotos){g=function(){j.height-=j.height*n;j.width-=j.width*n};if(a.mw&&j.width>a.mw){n=
(j.width-a.mw)/j.width;g()}if(a.mh&&j.height>a.mh){n=(j.height-a.mh)/j.height;g()}}if(a.h)j.style.marginTop=Math.max(a.h-j.height,0)/2+"px";if(h[1]&&(i<h.length-1||a.loop)){j.style.cursor="pointer";j.onclick=function(){e.next()}}if(H)j.style.msInterpolationMode="bicubic";setTimeout(function(){m(j)},1)});setTimeout(function(){j.src=d},1)}else d&&N.load(d,a.data,function(n,E,I){m(E==="error"?f("Error").text("Request unsuccessful: "+I.statusText):c(this).contents())})};e.next=function(){if(!L&&h[1]&&
(i<h.length-1||a.loop)){i=i<h.length-1?i+1:0;e.load()}};e.prev=function(){if(!L&&h[1]&&(i||a.loop)){i=i?i-1:h.length-1;e.load()}};e.close=function(){if(v&&!S){S=true;v=false;C(R,a.onCleanup);q.unbind("."+l+" ."+T);z.fadeTo(200,0);k.stop().fadeTo(300,0,function(){k.add(z).css({opacity:1,cursor:"auto"}).hide();C(U);p.remove();setTimeout(function(){S=false;C(ka,a.onClosed)},1)})}};e.element=function(){return c(r)};e.settings=ma;ha=function(b){if(!(b.button!==0&&typeof b.button!=="undefined"||b.ctrlKey||
b.shiftKey||b.altKey)){b.preventDefault();ja(this)}};c.fn.delegate?c(J).delegate("."+G,"click",ha):c("."+G).live("click",ha);c(e.init)})(jQuery,document,this);
