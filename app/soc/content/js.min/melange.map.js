(function(){if(window.melange===undefined)throw new Error("Melange not loaded");var g=window.melange;g.map=window.melange.map=function(){return new g.map};var k=g.logging.debugDecorator(g.map);g.error.createErrors([]);k.loadMap=function(l,d){var m={zoom:2,center:new google.maps.LatLng(0,0),mapTypeId:google.maps.MapTypeId.ROADMAP},h=new google.maps.Map(document.getElementById(l),m),j=[];jQuery.each(d.projects,function(b,a){b=d.students[a.student_key];a=d.mentors[a.mentor_key];b!==undefined&&a!==undefined&&
b.lat!==null&&b.lng!==null&&a.lat!==null&&a.lng!==null&&j.push([new google.maps.LatLng(b.lat,b.lng),new google.maps.LatLng(a.lat,a.lng)])});jQuery.each(d.students,function(b,a){var c="",e=null;if(a.lat!==null&&a.lng!==null){b=new google.maps.LatLng(a.lat,a.lng);e=new google.maps.Marker({position:b,title:a.name,map:h});c=["<strong>",a.name,"</strong><br /><span style='font-style:italic;'>Student</span><br /><div style='height:100px;width:300px;overflow:auto;'>"].join("");jQuery.each(a.projects,function(){var f=
d.projects[this];c+=["<a href='",f.link,"'>",f.title,"</a><br />Mentor: ",f.mentor_name,"<br />"].join("")});c+="</div>";var i=new google.maps.InfoWindow({content:c});google.maps.event.addListener(e,"click",function(){i.open(h,e)})}});jQuery.each(d.mentors,function(b,a){var c="",e=null;if(a.lat!==null&&a.lng!==null){b=new google.maps.LatLng(a.lat,a.lng);e=new google.maps.Marker({position:b,title:a.name,icon:"/soc/content/"+g.config.app_version+"/images/mentor-marker.png",map:h});c=["<strong>",a.name,
"</strong><br /><span style='font-style:italic;'>Mentor</span><br /><div style='height:100px;width:300px;overflow:auto;font-size:70%'>"].join("");jQuery.each(a.projects,function(){var f=d.projects[this];c+=["<a href='",f.link,"'>",f.title,"</a><br />Student: ",f.student_name,"<br />"].join("")});c+="</div>";var i=new google.maps.InfoWindow({content:c});google.maps.event.addListener(e,"click",function(){i.open(h,e)})}});jQuery.each(j,function(){new google.maps.Polyline({path:this,strokeColor:"#FF0000",
strokeOpacity:1,strokeWeight:3,map:h})})}})();
