(function(){if(window.melange===undefined)throw new Error("Melange not loaded");var f=window.melange;if(window.melange.list===undefined)throw new Error("melange.list not loaded");if(window.jLinq===undefined)throw new Error("jLinq not loaded");var h=window.jLinq;f.list.cookie_service=window.melange.list.cookie_service=function(){return new f.list.cookie_service};var k=f.logging.debugDecorator(f.list.cookie_service),l=function(b){var a={hidden_columns:{}};jQuery.each(b,function(d,c){a.hidden_columns[c.name]=
c.hidden});return a},m=function(b,a){return{sort_settings:{sortname:b,sortorder:a}}},n=function(b,a){var d={filters:{}};a._search===true&&jQuery.each(b,function(c,g){if(a[g.name]!==undefined)d.filters[g.name]=a[g.name]});return d};k.saveCurrentTableConfiguration=function(b,a){var d=f.cookie.getCookie(f.cookie.MELANGE_USER_PREFERENCES),c=a.jqGrid("getGridParam","colModel"),g=a.jqGrid("getGridParam","sortname"),i=a.jqGrid("getGridParam","sortorder"),e=a.jqGrid("getGridParam","postData");a=l(c);a=jQuery.extend(m(g,
i),a);a=jQuery.extend(n(c,e),a);c={lists_configuration:{}};c.lists_configuration[b]=a;c.lists_configuration=jQuery.extend(d.lists_configuration,c.lists_configuration);f.cookie.saveCookie(f.cookie.MELANGE_USER_PREFERENCES,c,14,window.location.pathname)};k.getPreviousTableConfiguration=function(b,a){var d=f.cookie.getCookie(f.cookie.MELANGE_USER_PREFERENCES),c=a.colModel;if(d.lists_configuration[b]!==undefined){jQuery.each(d.lists_configuration[b].hidden_columns,function(e,j){e=h.from(c).equals("name",
e).select()[0]||null;if(e!==null)e.hidden=j});if(d.lists_configuration[b].sort_settings!==undefined){var g=d.lists_configuration[b].sort_settings.sortname,i=d.lists_configuration[b].sort_settings.sortorder;if(h.from(c).equals("name",g).select()[0]!==undefined?true:false){a.sortname=g;a.sortorder=i}}d.lists_configuration[b].filters!==undefined&&jQuery.each(d.lists_configuration[b].filters,function(e,j){e=h.from(c).equals("name",e).select()[0];if(e!==undefined)e.searchoptions={defaultValue:j}})}return a}})();
