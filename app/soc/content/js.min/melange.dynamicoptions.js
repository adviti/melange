(function(a){a.fn.dynamicoptions=function(h){var c=a.extend({},h);return this.each(function(){var g=function(d){var b="";b+='<div class="options">';b+='<a href="#" class="remove" title="X">X</a>';var e=0;a.each(c.fields,function(i){b+='<input type="text" name='+i+' class="tagfield" value="'+unescape(d!==undefined&&d.length>e?d[e]:"")+'" />';e+=1});b+="</div>";return b},f='<label class="form-label">'+c.label+"</label>",j=JSON.parse(c.initial);a.each(j,function(d,b){f+=g(b)});f+='<div class="add-area clearfix"><a id=add-'+
c.id+' href="#" class="add">Add</a></div>';a(this).append(f);a(this).sortable({opacity:0.6,cursor:"move"});a(".options").live("hover",function(){a(this).css("cursor","move")},function(){a(this).css("cursor","auto")});a("#add-"+c.id).live("click",function(){a(this).parent().before(g());return false});a(".remove").live("click",function(){a(this).parent("div").animate({opacity:"hide",height:"hide",marginBottom:"0px"},"fast",function(){a(this).remove()});return false})})}})(jQuery);
